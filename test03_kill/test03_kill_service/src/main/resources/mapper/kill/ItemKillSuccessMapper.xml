<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rp.service.kill.mapper.ItemKillSuccessMapper">



    <select id="selectByOrderNo" resultType="com.rp.service.kill.dto.KillSuccessUserInfo">



        select
        a.code,
        a.item_id itemId,
        a.kill_id killId,
        a.user_id userId,
        a.status,
        a.create_time createTime,
         b.user_name userName,
            b.phone,
            b.email,
            c.name itemName
         from item_kill_success a
        LEFT JOIN user b on a.user_id = b.id
        LEFT JOIN item c on a.item_id = c.id
        where a.code =#{orderNo}

    </select>




    <select id="selectOrderExpireList" resultType="com.rp.service.kill.entity.ItemKillSuccess">
        select * , TIMESTAMPDIFF(minute ,create_time,now()) diffTime from item_kill_success where status = 0


    </select>
</mapper>
